{"ast":null,"code":"var _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\n// src/hooks/useApi.js\n\nimport { useState, useEffect } from 'react';\nimport { useAuth } from '../context/AuthContext';\nexport const useApi = () => {\n  _s();\n  const {\n    logout\n  } = useAuth();\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const handleApiCall = async (apiFunction, ...args) => {\n    try {\n      setLoading(true);\n      setError(null);\n      const result = await apiFunction(...args);\n      return result;\n    } catch (error) {\n      // Si el error es de autenticación, hacer logout automático\n      if (error.message.includes('401') || error.message.includes('Unauthorized')) {\n        logout();\n        window.location.href = '/login';\n      }\n      setError(error.message);\n      throw error;\n    } finally {\n      setLoading(false);\n    }\n  };\n  const clearError = () => {\n    setError(null);\n  };\n  const execute = handleApiCall;\n  return {\n    loading,\n    error,\n    execute,\n    handleApiCall,\n    clearError\n  };\n};\n\n// Hook específico para obtener datos con useEffect\n_s(useApi, \"HELn7iTAXxO6SMiGHdY4UBBUQ98=\", false, function () {\n  return [useAuth];\n});\nexport const useApiData = (apiFunction, dependencies = []) => {\n  _s2();\n  const [data, setData] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const {\n    logout\n  } = useAuth();\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        setLoading(true);\n        setError(null);\n        const result = await apiFunction();\n        setData(result);\n      } catch (error) {\n        if (error.message.includes('401') || error.message.includes('Unauthorized')) {\n          logout();\n          window.location.href = '/login';\n        }\n        setError(error.message);\n      } finally {\n        setLoading(false);\n      }\n    };\n    fetchData();\n  }, dependencies);\n  const refetch = async () => {\n    try {\n      setLoading(true);\n      setError(null);\n      const result = await apiFunction();\n      setData(result);\n    } catch (error) {\n      if (error.message.includes('401') || error.message.includes('Unauthorized')) {\n        logout();\n        window.location.href = '/login';\n      }\n      setError(error.message);\n    } finally {\n      setLoading(false);\n    }\n  };\n  return {\n    data,\n    loading,\n    error,\n    refetch\n  };\n};\n_s2(useApiData, \"Wc/r7U/TnPVKzY811SE2IUmQepg=\", false, function () {\n  return [useAuth];\n});\nexport default useApi;","map":{"version":3,"names":["useState","useEffect","useAuth","useApi","_s","logout","loading","setLoading","error","setError","handleApiCall","apiFunction","args","result","message","includes","window","location","href","clearError","execute","useApiData","dependencies","_s2","data","setData","fetchData","refetch"],"sources":["C:/Users/jpval/OneDrive/Desktop/jp/aplicaciones web/app_libreria_1/Frontend/src/hooks/useApi.js"],"sourcesContent":["// src/hooks/useApi.js\n\nimport { useState, useEffect } from 'react';\nimport { useAuth } from '../context/AuthContext';\n\nexport const useApi = () => {\n  const { logout } = useAuth();\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n\n  const handleApiCall = async (apiFunction, ...args) => {\n    try {\n      setLoading(true);\n      setError(null);\n      \n      const result = await apiFunction(...args);\n      return result;\n    } catch (error) {\n      // Si el error es de autenticación, hacer logout automático\n      if (error.message.includes('401') || error.message.includes('Unauthorized')) {\n        logout();\n        window.location.href = '/login';\n      }\n      \n      setError(error.message);\n      throw error;\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const clearError = () => {\n    setError(null);\n  };\n\n  const execute = handleApiCall;\n\n  return {\n    loading,\n    error,\n    execute,\n    handleApiCall,\n    clearError\n  };\n};\n\n// Hook específico para obtener datos con useEffect\nexport const useApiData = (apiFunction, dependencies = []) => {\n  const [data, setData] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const { logout } = useAuth();\n\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        setLoading(true);\n        setError(null);\n        \n        const result = await apiFunction();\n        setData(result);\n      } catch (error) {\n        if (error.message.includes('401') || error.message.includes('Unauthorized')) {\n          logout();\n          window.location.href = '/login';\n        }\n        \n        setError(error.message);\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchData();\n  }, dependencies);\n\n  const refetch = async () => {\n    try {\n      setLoading(true);\n      setError(null);\n      \n      const result = await apiFunction();\n      setData(result);\n    } catch (error) {\n      if (error.message.includes('401') || error.message.includes('Unauthorized')) {\n        logout();\n        window.location.href = '/login';\n      }\n      \n      setError(error.message);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return {\n    data,\n    loading,\n    error,\n    refetch\n  };\n};\n\nexport default useApi;"],"mappings":";;AAAA;;AAEA,SAASA,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAC3C,SAASC,OAAO,QAAQ,wBAAwB;AAEhD,OAAO,MAAMC,MAAM,GAAGA,CAAA,KAAM;EAAAC,EAAA;EAC1B,MAAM;IAAEC;EAAO,CAAC,GAAGH,OAAO,CAAC,CAAC;EAC5B,MAAM,CAACI,OAAO,EAAEC,UAAU,CAAC,GAAGP,QAAQ,CAAC,KAAK,CAAC;EAC7C,MAAM,CAACQ,KAAK,EAAEC,QAAQ,CAAC,GAAGT,QAAQ,CAAC,IAAI,CAAC;EAExC,MAAMU,aAAa,GAAG,MAAAA,CAAOC,WAAW,EAAE,GAAGC,IAAI,KAAK;IACpD,IAAI;MACFL,UAAU,CAAC,IAAI,CAAC;MAChBE,QAAQ,CAAC,IAAI,CAAC;MAEd,MAAMI,MAAM,GAAG,MAAMF,WAAW,CAAC,GAAGC,IAAI,CAAC;MACzC,OAAOC,MAAM;IACf,CAAC,CAAC,OAAOL,KAAK,EAAE;MACd;MACA,IAAIA,KAAK,CAACM,OAAO,CAACC,QAAQ,CAAC,KAAK,CAAC,IAAIP,KAAK,CAACM,OAAO,CAACC,QAAQ,CAAC,cAAc,CAAC,EAAE;QAC3EV,MAAM,CAAC,CAAC;QACRW,MAAM,CAACC,QAAQ,CAACC,IAAI,GAAG,QAAQ;MACjC;MAEAT,QAAQ,CAACD,KAAK,CAACM,OAAO,CAAC;MACvB,MAAMN,KAAK;IACb,CAAC,SAAS;MACRD,UAAU,CAAC,KAAK,CAAC;IACnB;EACF,CAAC;EAED,MAAMY,UAAU,GAAGA,CAAA,KAAM;IACvBV,QAAQ,CAAC,IAAI,CAAC;EAChB,CAAC;EAED,MAAMW,OAAO,GAAGV,aAAa;EAE7B,OAAO;IACLJ,OAAO;IACPE,KAAK;IACLY,OAAO;IACPV,aAAa;IACbS;EACF,CAAC;AACH,CAAC;;AAED;AAAAf,EAAA,CAzCaD,MAAM;EAAA,QACED,OAAO;AAAA;AAyC5B,OAAO,MAAMmB,UAAU,GAAGA,CAACV,WAAW,EAAEW,YAAY,GAAG,EAAE,KAAK;EAAAC,GAAA;EAC5D,MAAM,CAACC,IAAI,EAAEC,OAAO,CAAC,GAAGzB,QAAQ,CAAC,IAAI,CAAC;EACtC,MAAM,CAACM,OAAO,EAAEC,UAAU,CAAC,GAAGP,QAAQ,CAAC,IAAI,CAAC;EAC5C,MAAM,CAACQ,KAAK,EAAEC,QAAQ,CAAC,GAAGT,QAAQ,CAAC,IAAI,CAAC;EACxC,MAAM;IAAEK;EAAO,CAAC,GAAGH,OAAO,CAAC,CAAC;EAE5BD,SAAS,CAAC,MAAM;IACd,MAAMyB,SAAS,GAAG,MAAAA,CAAA,KAAY;MAC5B,IAAI;QACFnB,UAAU,CAAC,IAAI,CAAC;QAChBE,QAAQ,CAAC,IAAI,CAAC;QAEd,MAAMI,MAAM,GAAG,MAAMF,WAAW,CAAC,CAAC;QAClCc,OAAO,CAACZ,MAAM,CAAC;MACjB,CAAC,CAAC,OAAOL,KAAK,EAAE;QACd,IAAIA,KAAK,CAACM,OAAO,CAACC,QAAQ,CAAC,KAAK,CAAC,IAAIP,KAAK,CAACM,OAAO,CAACC,QAAQ,CAAC,cAAc,CAAC,EAAE;UAC3EV,MAAM,CAAC,CAAC;UACRW,MAAM,CAACC,QAAQ,CAACC,IAAI,GAAG,QAAQ;QACjC;QAEAT,QAAQ,CAACD,KAAK,CAACM,OAAO,CAAC;MACzB,CAAC,SAAS;QACRP,UAAU,CAAC,KAAK,CAAC;MACnB;IACF,CAAC;IAEDmB,SAAS,CAAC,CAAC;EACb,CAAC,EAAEJ,YAAY,CAAC;EAEhB,MAAMK,OAAO,GAAG,MAAAA,CAAA,KAAY;IAC1B,IAAI;MACFpB,UAAU,CAAC,IAAI,CAAC;MAChBE,QAAQ,CAAC,IAAI,CAAC;MAEd,MAAMI,MAAM,GAAG,MAAMF,WAAW,CAAC,CAAC;MAClCc,OAAO,CAACZ,MAAM,CAAC;IACjB,CAAC,CAAC,OAAOL,KAAK,EAAE;MACd,IAAIA,KAAK,CAACM,OAAO,CAACC,QAAQ,CAAC,KAAK,CAAC,IAAIP,KAAK,CAACM,OAAO,CAACC,QAAQ,CAAC,cAAc,CAAC,EAAE;QAC3EV,MAAM,CAAC,CAAC;QACRW,MAAM,CAACC,QAAQ,CAACC,IAAI,GAAG,QAAQ;MACjC;MAEAT,QAAQ,CAACD,KAAK,CAACM,OAAO,CAAC;IACzB,CAAC,SAAS;MACRP,UAAU,CAAC,KAAK,CAAC;IACnB;EACF,CAAC;EAED,OAAO;IACLiB,IAAI;IACJlB,OAAO;IACPE,KAAK;IACLmB;EACF,CAAC;AACH,CAAC;AAACJ,GAAA,CAtDWF,UAAU;EAAA,QAIFnB,OAAO;AAAA;AAoD5B,eAAeC,MAAM","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}