{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\jpval\\\\OneDrive\\\\Desktop\\\\jp\\\\aplicaciones web\\\\app_libreria_1\\\\Frontend\\\\src\\\\pages\\\\Admin\\\\AdminReturnsPage.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useCallback } from 'react';\nimport { useApi } from '../../hooks/useApi';\nimport loanService from '../../services/loanService';\nimport LoadingSpinner from '../../components/common/LoadingSpinner';\nimport Layout from '../../components/common/Layout';\nimport { useAuth } from '../../context/AuthContext';\nimport ReturnsStats from '../../components/admin/ReturnsStats';\nimport '../../styles/AdminReturnsPage.css';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst AdminReturnsPage = () => {\n  _s();\n  const [loans, setLoans] = useState([]);\n  const [filteredLoans, setFilteredLoans] = useState([]);\n  const [filters, setFilters] = useState({\n    status: 'all',\n    // all, active, returned, overdue\n    readerEmail: '',\n    bookTitle: '',\n    startDate: '',\n    endDate: ''\n  });\n  const [pendingFilters, setPendingFilters] = useState({\n    status: 'all',\n    readerEmail: '',\n    bookTitle: '',\n    startDate: '',\n    endDate: ''\n  });\n  const [selectedLoan, setSelectedLoan] = useState(null);\n  const [showReturnModal, setShowReturnModal] = useState(false);\n  const [returnLoading, setReturnLoading] = useState(false);\n  const [activeTab, setActiveTab] = useState('table'); // 'table' o 'stats'\n\n  const {\n    loading,\n    error,\n    handleApiCall\n  } = useApi();\n  const {\n    user,\n    isAdmin\n  } = useAuth();\n\n  // Función para mapear datos del backend a la estructura esperada por el frontend\n  const mapBookingToLoan = booking => {\n    var _booking$copyBook, _booking$copyBook$boo, _booking$copyBook2, _booking$copyBook2$bo, _booking$copyBook3, _booking$copyBook3$bo, _booking$user, _booking$user2, _booking$user3;\n    const now = new Date();\n    const dueDate = new Date(booking.dateReturn);\n    // Cambiar interpretación: 0 = ACTIVO, 1 = RETURNED\n    const isActive = booking.state === 0;\n    const isReturned = booking.state === 1;\n    const isOverdue = isActive && dueDate < now;\n    return {\n      id: booking.idBooking,\n      bookTitle: ((_booking$copyBook = booking.copyBook) === null || _booking$copyBook === void 0 ? void 0 : (_booking$copyBook$boo = _booking$copyBook.book) === null || _booking$copyBook$boo === void 0 ? void 0 : _booking$copyBook$boo.title) || 'Título no disponible',\n      bookAuthor: ((_booking$copyBook2 = booking.copyBook) === null || _booking$copyBook2 === void 0 ? void 0 : (_booking$copyBook2$bo = _booking$copyBook2.book) === null || _booking$copyBook2$bo === void 0 ? void 0 : _booking$copyBook2$bo.author) || 'N/A',\n      bookIsbn: ((_booking$copyBook3 = booking.copyBook) === null || _booking$copyBook3 === void 0 ? void 0 : (_booking$copyBook3$bo = _booking$copyBook3.book) === null || _booking$copyBook3$bo === void 0 ? void 0 : _booking$copyBook3$bo.isbn) || 'N/A',\n      readerName: ((_booking$user = booking.user) === null || _booking$user === void 0 ? void 0 : _booking$user.name) || ((_booking$user2 = booking.user) === null || _booking$user2 === void 0 ? void 0 : _booking$user2.email) || 'N/A',\n      readerEmail: ((_booking$user3 = booking.user) === null || _booking$user3 === void 0 ? void 0 : _booking$user3.email) || 'N/A',\n      loanDate: booking.dateBooking,\n      dueDate: booking.dateReturn,\n      returnDate: isReturned ? booking.dateReturn : null,\n      status: isActive ? isOverdue ? 'OVERDUE' : 'ACTIVE' : 'RETURNED',\n      state: booking.state,\n      originalBooking: booking,\n      idBooking: booking.idBooking,\n      user: booking.user,\n      copyBook: booking.copyBook\n    };\n  };\n\n  // Cargar préstamos\n  const loadLoans = useCallback(async () => {\n    try {\n      const response = await handleApiCall(loanService.getAllLoans);\n      if (response) {\n        const mappedLoans = response.map(mapBookingToLoan);\n        setLoans(mappedLoans);\n        applyFilters(mappedLoans);\n      }\n    } catch (err) {\n      console.error('Error loading loans:', err);\n    }\n  }, [handleApiCall]);\n  useEffect(() => {\n    loadLoans();\n  }, [loadLoans]);\n  useEffect(() => {\n    applyFilters();\n  }, [loans, filters]);\n  const applyFilters = (loansToFilter = loans) => {\n    let filtered = [...loansToFilter];\n\n    // Filtro por estado\n    if (filters.status !== 'all') {\n      switch (filters.status) {\n        case 'active':\n          filtered = filtered.filter(loan => loan.status === 'ACTIVE');\n          break;\n        case 'returned':\n          filtered = filtered.filter(loan => loan.status === 'RETURNED');\n          break;\n        case 'overdue':\n          filtered = filtered.filter(loan => loan.status === 'OVERDUE');\n          break;\n        default:\n          break;\n      }\n    }\n\n    // Filtro por email del lector\n    if (filters.readerEmail) {\n      filtered = filtered.filter(loan => loan.readerEmail.toLowerCase().includes(filters.readerEmail.toLowerCase()));\n    }\n\n    // Filtro por título del libro\n    if (filters.bookTitle) {\n      filtered = filtered.filter(loan => loan.bookTitle.toLowerCase().includes(filters.bookTitle.toLowerCase()));\n    }\n\n    // Filtro por fecha de préstamo\n    if (filters.startDate) {\n      filtered = filtered.filter(loan => new Date(loan.loanDate) >= new Date(filters.startDate));\n    }\n    if (filters.endDate) {\n      filtered = filtered.filter(loan => new Date(loan.loanDate) <= new Date(filters.endDate));\n    }\n    setFilteredLoans(filtered);\n  };\n  const handleFilterChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setPendingFilters(prev => ({\n      ...prev,\n      [name]: value\n    }));\n  };\n  const applyPendingFilters = () => {\n    setFilters({\n      ...pendingFilters\n    });\n  };\n  const resetFilters = () => {\n    const resetFilters = {\n      status: 'all',\n      readerEmail: '',\n      bookTitle: '',\n      startDate: '',\n      endDate: ''\n    };\n    setFilters(resetFilters);\n    setPendingFilters(resetFilters);\n  };\n  const handleReturnLoan = async loanId => {\n    try {\n      setReturnLoading(true);\n      await handleApiCall(loanService.returnLoan, loanId);\n      setShowReturnModal(false);\n      setSelectedLoan(null);\n      loadLoans();\n      alert('Libro devuelto exitosamente');\n    } catch (err) {\n      console.error('Error returning loan:', err);\n      alert(`Error al devolver el libro: ${err.message}`);\n    } finally {\n      setReturnLoading(false);\n    }\n  };\n  const openReturnModal = loan => {\n    setSelectedLoan(loan);\n    setShowReturnModal(true);\n  };\n  const closeReturnModal = () => {\n    setShowReturnModal(false);\n    setSelectedLoan(null);\n  };\n  const formatDate = dateString => {\n    if (!dateString) return 'N/A';\n    return new Date(dateString).toLocaleDateString('es-ES', {\n      year: 'numeric',\n      month: '2-digit',\n      day: '2-digit',\n      hour: '2-digit',\n      minute: '2-digit'\n    });\n  };\n  const getStatusBadge = status => {\n    const statusConfig = {\n      'ACTIVE': {\n        text: 'Activo',\n        className: 'badge-success'\n      },\n      'RETURNED': {\n        text: 'Devuelto',\n        className: 'badge-info'\n      },\n      'OVERDUE': {\n        text: 'Vencido',\n        className: 'badge-danger'\n      }\n    };\n    const config = statusConfig[status] || {\n      text: status,\n      className: 'badge-secondary'\n    };\n    return /*#__PURE__*/_jsxDEV(\"span\", {\n      className: `badge ${config.className}`,\n      children: config.text\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 203,\n      columnNumber: 12\n    }, this);\n  };\n  const getDaysLate = dueDate => {\n    const now = new Date();\n    const due = new Date(dueDate);\n    const diffTime = now - due;\n    const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));\n    return diffDays > 0 ? diffDays : 0;\n  };\n\n  // Estadísticas\n  const stats = {\n    total: loans.length,\n    active: loans.filter(loan => loan.status === 'ACTIVE').length,\n    returned: loans.filter(loan => loan.status === 'RETURNED').length,\n    overdue: loans.filter(loan => loan.status === 'OVERDUE').length,\n    totalOverdueDays: loans.filter(loan => loan.status === 'OVERDUE').reduce((total, loan) => total + getDaysLate(loan.dueDate), 0)\n  };\n  const showTable = activeTab === 'table';\n  return /*#__PURE__*/_jsxDEV(Layout, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"admin-returns-page\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"page-header\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          children: \"\\uD83D\\uDCE4 Gesti\\xF3n de Devoluciones\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 231,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Administra las devoluciones de libros y monitorea el estado de los pr\\xE9stamos\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 232,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 230,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"tabs-navigation\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: `tab-button ${activeTab === 'table' ? 'active' : ''}`,\n          onClick: () => setActiveTab('table'),\n          children: \"\\uD83D\\uDCCB Tabla de Pr\\xE9stamos\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 237,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: `tab-button ${activeTab === 'stats' ? 'active' : ''}`,\n          onClick: () => setActiveTab('stats'),\n          children: \"\\uD83D\\uDCCA Estad\\xEDsticas Detalladas\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 243,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 236,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"stats-grid\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"stat-card\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"stat-icon\",\n            children: \"\\uD83D\\uDCDA\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 254,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"stat-content\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              children: \"Total Pr\\xE9stamos\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 256,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"stat-number\",\n              children: stats.total\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 257,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 255,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 253,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"stat-card\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"stat-icon\",\n            children: \"\\uD83D\\uDD04\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 261,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"stat-content\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              children: \"Pr\\xE9stamos Activos\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 263,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"stat-number\",\n              children: stats.active\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 264,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 262,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 260,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"stat-card\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"stat-icon\",\n            children: \"\\u2705\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 268,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"stat-content\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              children: \"Libros Devueltos\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 270,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"stat-number\",\n              children: stats.returned\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 271,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 269,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 267,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"stat-card\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"stat-icon\",\n            children: \"\\u26A0\\uFE0F\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 275,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"stat-content\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              children: \"Pr\\xE9stamos Vencidos\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 277,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"stat-number\",\n              children: stats.overdue\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 278,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 276,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 274,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 252,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"filters-section\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"filters-grid\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"filter-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Estado:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 287,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n              name: \"status\",\n              value: pendingFilters.status,\n              onChange: handleFilterChange,\n              className: \"filter-select\",\n              children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"all\",\n                children: \"Todos los estados\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 294,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"active\",\n                children: \"Activos\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 295,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"returned\",\n                children: \"Devueltos\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 296,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"overdue\",\n                children: \"Vencidos\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 297,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 288,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 286,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"filter-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Email del Lector:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 302,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              name: \"readerEmail\",\n              value: pendingFilters.readerEmail,\n              onChange: handleFilterChange,\n              placeholder: \"Buscar por email...\",\n              className: \"filter-input\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 303,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 301,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"filter-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"T\\xEDtulo del Libro:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 314,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              name: \"bookTitle\",\n              value: pendingFilters.bookTitle,\n              onChange: handleFilterChange,\n              placeholder: \"Buscar por t\\xEDtulo...\",\n              className: \"filter-input\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 315,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 313,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"filter-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Fecha Desde:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 326,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"date\",\n              name: \"startDate\",\n              value: pendingFilters.startDate,\n              onChange: handleFilterChange,\n              className: \"filter-input\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 327,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 325,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"filter-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Fecha Hasta:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 337,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"date\",\n              name: \"endDate\",\n              value: pendingFilters.endDate,\n              onChange: handleFilterChange,\n              className: \"filter-input\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 338,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 336,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 285,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"filter-actions\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: applyPendingFilters,\n            className: \"btn btn-primary\",\n            children: \"Aplicar Filtros\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 349,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: resetFilters,\n            className: \"btn btn-secondary\",\n            children: \"Limpiar Filtros\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 352,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 348,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"results-info\",\n          children: [\"Mostrando \", filteredLoans.length, \" de \", loans.length, \" pr\\xE9stamos\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 357,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 284,\n        columnNumber: 9\n      }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"error-message\",\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Error: \", error]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 364,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 363,\n        columnNumber: 11\n      }, this), showTable && /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"loans-container\",\n          style: {\n            position: 'relative'\n          },\n          children: [loading && /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              position: 'absolute',\n              top: 0,\n              left: 0,\n              right: 0,\n              bottom: 0,\n              display: 'flex',\n              alignItems: 'center',\n              justifyContent: 'center',\n              background: 'rgba(255,255,255,0.7)',\n              zIndex: 2\n            },\n            children: /*#__PURE__*/_jsxDEV(LoadingSpinner, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 379,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 373,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"loans-table\",\n            style: {\n              opacity: loading ? 0.5 : 1\n            },\n            children: /*#__PURE__*/_jsxDEV(\"table\", {\n              children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n                children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                    children: \"Libro\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 386,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    children: \"Lector\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 387,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    children: \"Fecha Pr\\xE9stamo\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 388,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    children: \"Fecha Vencimiento\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 389,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    children: \"Estado\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 390,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    children: \"D\\xEDas Vencido\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 391,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    children: \"Acciones\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 392,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 385,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 384,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n                children: filteredLoans.length === 0 && !loading ? /*#__PURE__*/_jsxDEV(\"tr\", {\n                  children: /*#__PURE__*/_jsxDEV(\"td\", {\n                    colSpan: \"7\",\n                    style: {\n                      textAlign: 'center',\n                      color: '#888'\n                    },\n                    children: \"No se encontraron pr\\xE9stamos\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 398,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 397,\n                  columnNumber: 23\n                }, this) : filteredLoans.map(loan => /*#__PURE__*/_jsxDEV(\"tr\", {\n                  className: loan.status === 'OVERDUE' ? 'overdue-row' : loan.status === 'ACTIVE' ? 'active-row' : loan.status === 'RETURNED' ? 'returned-row' : '',\n                  children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                    children: /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"book-info\",\n                      children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                        children: loan.bookTitle\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 418,\n                        columnNumber: 31\n                      }, this), /*#__PURE__*/_jsxDEV(\"small\", {\n                        children: loan.bookAuthor\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 419,\n                        columnNumber: 31\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 417,\n                      columnNumber: 29\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 416,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    children: /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"reader-info\",\n                      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                        children: loan.readerName\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 424,\n                        columnNumber: 31\n                      }, this), /*#__PURE__*/_jsxDEV(\"small\", {\n                        children: loan.readerEmail\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 425,\n                        columnNumber: 31\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 423,\n                      columnNumber: 29\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 422,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    children: formatDate(loan.loanDate)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 428,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    children: formatDate(loan.dueDate)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 429,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    children: getStatusBadge(loan.status)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 430,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    children: loan.status === 'OVERDUE' ? /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"days-late\",\n                      children: [getDaysLate(loan.dueDate), \" d\\xEDas\"]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 433,\n                      columnNumber: 31\n                    }, this) : '-'\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 431,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    children: loan.status === 'ACTIVE' || loan.status === 'OVERDUE' ? /*#__PURE__*/_jsxDEV(\"button\", {\n                      onClick: () => openReturnModal(loan),\n                      className: \"btn btn-success btn-sm\",\n                      children: \"\\uD83D\\uDCE4 Devolver\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 442,\n                      columnNumber: 31\n                    }, this) : /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"text-muted\",\n                      children: \"Ya devuelto\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 449,\n                      columnNumber: 31\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 440,\n                    columnNumber: 27\n                  }, this)]\n                }, loan.id, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 404,\n                  columnNumber: 25\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 395,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 383,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 382,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 371,\n          columnNumber: 13\n        }, this)\n      }, void 0, false), activeTab === 'stats' && /*#__PURE__*/_jsxDEV(ReturnsStats, {\n        loans: loans\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 463,\n        columnNumber: 11\n      }, this), showReturnModal && selectedLoan && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"modal-overlay\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"modal-content\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"modal-header\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              children: \"Confirmar Devoluci\\xF3n\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 471,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: closeReturnModal,\n              className: \"modal-close\",\n              children: \"\\xD7\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 472,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 470,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"modal-body\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"\\xBFEst\\xE1 seguro de que desea procesar la devoluci\\xF3n del siguiente libro?\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 475,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"return-details\",\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: \"Libro:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 477,\n                  columnNumber: 22\n                }, this), \" \", selectedLoan.bookTitle]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 477,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: \"Lector:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 478,\n                  columnNumber: 22\n                }, this), \" \", selectedLoan.readerName, \" (\", selectedLoan.readerEmail, \")\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 478,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: \"Fecha de pr\\xE9stamo:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 479,\n                  columnNumber: 22\n                }, this), \" \", formatDate(selectedLoan.loanDate)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 479,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: \"Fecha de vencimiento:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 480,\n                  columnNumber: 22\n                }, this), \" \", formatDate(selectedLoan.dueDate)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 480,\n                columnNumber: 19\n              }, this), selectedLoan.status === 'OVERDUE' && /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"overdue-warning\",\n                children: [\"\\u26A0\\uFE0F Este pr\\xE9stamo est\\xE1 vencido por \", getDaysLate(selectedLoan.dueDate), \" d\\xEDas. Se aplicar\\xE1 una multa autom\\xE1ticamente.\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 482,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 476,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 474,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"modal-footer\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: closeReturnModal,\n              className: \"btn btn-secondary\",\n              children: \"Cancelar\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 490,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => handleReturnLoan(selectedLoan.id),\n              className: \"btn btn-success\",\n              disabled: returnLoading,\n              children: returnLoading ? 'Procesando...' : 'Confirmar Devolución'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 493,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 489,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 469,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 468,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 229,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 228,\n    columnNumber: 5\n  }, this);\n};\n_s(AdminReturnsPage, \"PEKtorhT0nCR3/Msz90vmqPB33I=\", false, function () {\n  return [useApi, useAuth];\n});\n_c = AdminReturnsPage;\nexport default AdminReturnsPage;\nvar _c;\n$RefreshReg$(_c, \"AdminReturnsPage\");","map":{"version":3,"names":["React","useState","useEffect","useCallback","useApi","loanService","LoadingSpinner","Layout","useAuth","ReturnsStats","jsxDEV","_jsxDEV","Fragment","_Fragment","AdminReturnsPage","_s","loans","setLoans","filteredLoans","setFilteredLoans","filters","setFilters","status","readerEmail","bookTitle","startDate","endDate","pendingFilters","setPendingFilters","selectedLoan","setSelectedLoan","showReturnModal","setShowReturnModal","returnLoading","setReturnLoading","activeTab","setActiveTab","loading","error","handleApiCall","user","isAdmin","mapBookingToLoan","booking","_booking$copyBook","_booking$copyBook$boo","_booking$copyBook2","_booking$copyBook2$bo","_booking$copyBook3","_booking$copyBook3$bo","_booking$user","_booking$user2","_booking$user3","now","Date","dueDate","dateReturn","isActive","state","isReturned","isOverdue","id","idBooking","copyBook","book","title","bookAuthor","author","bookIsbn","isbn","readerName","name","email","loanDate","dateBooking","returnDate","originalBooking","loadLoans","response","getAllLoans","mappedLoans","map","applyFilters","err","console","loansToFilter","filtered","filter","loan","toLowerCase","includes","handleFilterChange","e","value","target","prev","applyPendingFilters","resetFilters","handleReturnLoan","loanId","returnLoan","alert","message","openReturnModal","closeReturnModal","formatDate","dateString","toLocaleDateString","year","month","day","hour","minute","getStatusBadge","statusConfig","text","className","config","children","fileName","_jsxFileName","lineNumber","columnNumber","getDaysLate","due","diffTime","diffDays","Math","ceil","stats","total","length","active","returned","overdue","totalOverdueDays","reduce","showTable","onClick","onChange","type","placeholder","style","position","top","left","right","bottom","display","alignItems","justifyContent","background","zIndex","opacity","colSpan","textAlign","color","disabled","_c","$RefreshReg$"],"sources":["C:/Users/jpval/OneDrive/Desktop/jp/aplicaciones web/app_libreria_1/Frontend/src/pages/Admin/AdminReturnsPage.js"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\r\nimport { useApi } from '../../hooks/useApi';\r\nimport loanService from '../../services/loanService';\r\nimport LoadingSpinner from '../../components/common/LoadingSpinner';\r\nimport Layout from '../../components/common/Layout';\r\nimport { useAuth } from '../../context/AuthContext';\r\nimport ReturnsStats from '../../components/admin/ReturnsStats';\r\nimport '../../styles/AdminReturnsPage.css';\r\n\r\nconst AdminReturnsPage = () => {\r\n  const [loans, setLoans] = useState([]);\r\n  const [filteredLoans, setFilteredLoans] = useState([]);\r\n  const [filters, setFilters] = useState({\r\n    status: 'all', // all, active, returned, overdue\r\n    readerEmail: '',\r\n    bookTitle: '',\r\n    startDate: '',\r\n    endDate: ''\r\n  });\r\n  const [pendingFilters, setPendingFilters] = useState({\r\n    status: 'all',\r\n    readerEmail: '',\r\n    bookTitle: '',\r\n    startDate: '',\r\n    endDate: ''\r\n  });\r\n  const [selectedLoan, setSelectedLoan] = useState(null);\r\n  const [showReturnModal, setShowReturnModal] = useState(false);\r\n  const [returnLoading, setReturnLoading] = useState(false);\r\n  const [activeTab, setActiveTab] = useState('table'); // 'table' o 'stats'\r\n\r\n  const { loading, error, handleApiCall } = useApi();\r\n  const { user, isAdmin } = useAuth();\r\n\r\n  // Función para mapear datos del backend a la estructura esperada por el frontend\r\n  const mapBookingToLoan = (booking) => {\r\n    const now = new Date();\r\n    const dueDate = new Date(booking.dateReturn);\r\n    // Cambiar interpretación: 0 = ACTIVO, 1 = RETURNED\r\n    const isActive = booking.state === 0;\r\n    const isReturned = booking.state === 1;\r\n    const isOverdue = isActive && dueDate < now;\r\n    return {\r\n      id: booking.idBooking,\r\n      bookTitle: booking.copyBook?.book?.title || 'Título no disponible',\r\n      bookAuthor: booking.copyBook?.book?.author || 'N/A',\r\n      bookIsbn: booking.copyBook?.book?.isbn || 'N/A',\r\n      readerName: booking.user?.name || booking.user?.email || 'N/A',\r\n      readerEmail: booking.user?.email || 'N/A',\r\n      loanDate: booking.dateBooking,\r\n      dueDate: booking.dateReturn,\r\n      returnDate: isReturned ? booking.dateReturn : null,\r\n      status: isActive ? (isOverdue ? 'OVERDUE' : 'ACTIVE') : 'RETURNED',\r\n      state: booking.state,\r\n      originalBooking: booking,\r\n      idBooking: booking.idBooking,\r\n      user: booking.user,\r\n      copyBook: booking.copyBook\r\n    };\r\n  };\r\n\r\n  // Cargar préstamos\r\n  const loadLoans = useCallback(async () => {\r\n    try {\r\n      const response = await handleApiCall(loanService.getAllLoans);\r\n      if (response) {\r\n        const mappedLoans = response.map(mapBookingToLoan);\r\n        setLoans(mappedLoans);\r\n        applyFilters(mappedLoans);\r\n      }\r\n    } catch (err) {\r\n      console.error('Error loading loans:', err);\r\n    }\r\n  }, [handleApiCall]);\r\n\r\n  useEffect(() => {\r\n    loadLoans();\r\n  }, [loadLoans]);\r\n\r\n  useEffect(() => {\r\n    applyFilters();\r\n  }, [loans, filters]);\r\n\r\n  const applyFilters = (loansToFilter = loans) => {\r\n    let filtered = [...loansToFilter];\r\n\r\n    // Filtro por estado\r\n    if (filters.status !== 'all') {\r\n      switch (filters.status) {\r\n        case 'active':\r\n          filtered = filtered.filter(loan => loan.status === 'ACTIVE');\r\n          break;\r\n        case 'returned':\r\n          filtered = filtered.filter(loan => loan.status === 'RETURNED');\r\n          break;\r\n        case 'overdue':\r\n          filtered = filtered.filter(loan => loan.status === 'OVERDUE');\r\n          break;\r\n        default:\r\n          break;\r\n      }\r\n    }\r\n\r\n    // Filtro por email del lector\r\n    if (filters.readerEmail) {\r\n      filtered = filtered.filter(loan =>\r\n        loan.readerEmail.toLowerCase().includes(filters.readerEmail.toLowerCase())\r\n      );\r\n    }\r\n\r\n    // Filtro por título del libro\r\n    if (filters.bookTitle) {\r\n      filtered = filtered.filter(loan =>\r\n        loan.bookTitle.toLowerCase().includes(filters.bookTitle.toLowerCase())\r\n      );\r\n    }\r\n\r\n    // Filtro por fecha de préstamo\r\n    if (filters.startDate) {\r\n      filtered = filtered.filter(loan =>\r\n        new Date(loan.loanDate) >= new Date(filters.startDate)\r\n      );\r\n    }\r\n\r\n    if (filters.endDate) {\r\n      filtered = filtered.filter(loan =>\r\n        new Date(loan.loanDate) <= new Date(filters.endDate)\r\n      );\r\n    }\r\n\r\n    setFilteredLoans(filtered);\r\n  };\r\n\r\n  const handleFilterChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setPendingFilters(prev => ({\r\n      ...prev,\r\n      [name]: value\r\n    }));\r\n  };\r\n\r\n  const applyPendingFilters = () => {\r\n    setFilters({ ...pendingFilters });\r\n  };\r\n\r\n  const resetFilters = () => {\r\n    const resetFilters = {\r\n      status: 'all',\r\n      readerEmail: '',\r\n      bookTitle: '',\r\n      startDate: '',\r\n      endDate: ''\r\n    };\r\n    setFilters(resetFilters);\r\n    setPendingFilters(resetFilters);\r\n  };\r\n\r\n  const handleReturnLoan = async (loanId) => {\r\n    try {\r\n      setReturnLoading(true);\r\n      await handleApiCall(loanService.returnLoan, loanId);\r\n      setShowReturnModal(false);\r\n      setSelectedLoan(null);\r\n      loadLoans();\r\n      alert('Libro devuelto exitosamente');\r\n    } catch (err) {\r\n      console.error('Error returning loan:', err);\r\n      alert(`Error al devolver el libro: ${err.message}`);\r\n    } finally {\r\n      setReturnLoading(false);\r\n    }\r\n  };\r\n\r\n  const openReturnModal = (loan) => {\r\n    setSelectedLoan(loan);\r\n    setShowReturnModal(true);\r\n  };\r\n\r\n  const closeReturnModal = () => {\r\n    setShowReturnModal(false);\r\n    setSelectedLoan(null);\r\n  };\r\n\r\n  const formatDate = (dateString) => {\r\n    if (!dateString) return 'N/A';\r\n    return new Date(dateString).toLocaleDateString('es-ES', {\r\n      year: 'numeric',\r\n      month: '2-digit',\r\n      day: '2-digit',\r\n      hour: '2-digit',\r\n      minute: '2-digit'\r\n    });\r\n  };\r\n\r\n  const getStatusBadge = (status) => {\r\n    const statusConfig = {\r\n      'ACTIVE': { text: 'Activo', className: 'badge-success' },\r\n      'RETURNED': { text: 'Devuelto', className: 'badge-info' },\r\n      'OVERDUE': { text: 'Vencido', className: 'badge-danger' }\r\n    };\r\n    \r\n    const config = statusConfig[status] || { text: status, className: 'badge-secondary' };\r\n    return <span className={`badge ${config.className}`}>{config.text}</span>;\r\n  };\r\n\r\n  const getDaysLate = (dueDate) => {\r\n    const now = new Date();\r\n    const due = new Date(dueDate);\r\n    const diffTime = now - due;\r\n    const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));\r\n    return diffDays > 0 ? diffDays : 0;\r\n  };\r\n\r\n  // Estadísticas\r\n  const stats = {\r\n    total: loans.length,\r\n    active: loans.filter(loan => loan.status === 'ACTIVE').length,\r\n    returned: loans.filter(loan => loan.status === 'RETURNED').length,\r\n    overdue: loans.filter(loan => loan.status === 'OVERDUE').length,\r\n    totalOverdueDays: loans\r\n      .filter(loan => loan.status === 'OVERDUE')\r\n      .reduce((total, loan) => total + getDaysLate(loan.dueDate), 0)\r\n  };\r\n\r\n  const showTable = activeTab === 'table';\r\n\r\n  return (\r\n    <Layout>\r\n      <div className=\"admin-returns-page\">\r\n        <div className=\"page-header\">\r\n          <h1>📤 Gestión de Devoluciones</h1>\r\n          <p>Administra las devoluciones de libros y monitorea el estado de los préstamos</p>\r\n        </div>\r\n\r\n        {/* Pestañas de navegación */}\r\n        <div className=\"tabs-navigation\">\r\n          <button\r\n            className={`tab-button ${activeTab === 'table' ? 'active' : ''}`}\r\n            onClick={() => setActiveTab('table')}\r\n          >\r\n            📋 Tabla de Préstamos\r\n          </button>\r\n          <button\r\n            className={`tab-button ${activeTab === 'stats' ? 'active' : ''}`}\r\n            onClick={() => setActiveTab('stats')}\r\n          >\r\n            📊 Estadísticas Detalladas\r\n          </button>\r\n        </div>\r\n\r\n        {/* Estadísticas básicas */}\r\n        <div className=\"stats-grid\">\r\n          <div className=\"stat-card\">\r\n            <div className=\"stat-icon\">📚</div>\r\n            <div className=\"stat-content\">\r\n              <h3>Total Préstamos</h3>\r\n              <p className=\"stat-number\">{stats.total}</p>\r\n            </div>\r\n          </div>\r\n          <div className=\"stat-card\">\r\n            <div className=\"stat-icon\">🔄</div>\r\n            <div className=\"stat-content\">\r\n              <h3>Préstamos Activos</h3>\r\n              <p className=\"stat-number\">{stats.active}</p>\r\n            </div>\r\n          </div>\r\n          <div className=\"stat-card\">\r\n            <div className=\"stat-icon\">✅</div>\r\n            <div className=\"stat-content\">\r\n              <h3>Libros Devueltos</h3>\r\n              <p className=\"stat-number\">{stats.returned}</p>\r\n            </div>\r\n          </div>\r\n          <div className=\"stat-card\">\r\n            <div className=\"stat-icon\">⚠️</div>\r\n            <div className=\"stat-content\">\r\n              <h3>Préstamos Vencidos</h3>\r\n              <p className=\"stat-number\">{stats.overdue}</p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Filtros */}\r\n        <div className=\"filters-section\">\r\n          <div className=\"filters-grid\">\r\n            <div className=\"filter-group\">\r\n              <label>Estado:</label>\r\n              <select\r\n                name=\"status\"\r\n                value={pendingFilters.status}\r\n                onChange={handleFilterChange}\r\n                className=\"filter-select\"\r\n              >\r\n                <option value=\"all\">Todos los estados</option>\r\n                <option value=\"active\">Activos</option>\r\n                <option value=\"returned\">Devueltos</option>\r\n                <option value=\"overdue\">Vencidos</option>\r\n              </select>\r\n            </div>\r\n\r\n            <div className=\"filter-group\">\r\n              <label>Email del Lector:</label>\r\n              <input\r\n                type=\"text\"\r\n                name=\"readerEmail\"\r\n                value={pendingFilters.readerEmail}\r\n                onChange={handleFilterChange}\r\n                placeholder=\"Buscar por email...\"\r\n                className=\"filter-input\"\r\n              />\r\n            </div>\r\n\r\n            <div className=\"filter-group\">\r\n              <label>Título del Libro:</label>\r\n              <input\r\n                type=\"text\"\r\n                name=\"bookTitle\"\r\n                value={pendingFilters.bookTitle}\r\n                onChange={handleFilterChange}\r\n                placeholder=\"Buscar por título...\"\r\n                className=\"filter-input\"\r\n              />\r\n            </div>\r\n\r\n            <div className=\"filter-group\">\r\n              <label>Fecha Desde:</label>\r\n              <input\r\n                type=\"date\"\r\n                name=\"startDate\"\r\n                value={pendingFilters.startDate}\r\n                onChange={handleFilterChange}\r\n                className=\"filter-input\"\r\n              />\r\n            </div>\r\n\r\n            <div className=\"filter-group\">\r\n              <label>Fecha Hasta:</label>\r\n              <input\r\n                type=\"date\"\r\n                name=\"endDate\"\r\n                value={pendingFilters.endDate}\r\n                onChange={handleFilterChange}\r\n                className=\"filter-input\"\r\n              />\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"filter-actions\">\r\n            <button onClick={applyPendingFilters} className=\"btn btn-primary\">\r\n              Aplicar Filtros\r\n            </button>\r\n            <button onClick={resetFilters} className=\"btn btn-secondary\">\r\n              Limpiar Filtros\r\n            </button>\r\n          </div>\r\n\r\n          <div className=\"results-info\">\r\n            Mostrando {filteredLoans.length} de {loans.length} préstamos\r\n          </div>\r\n        </div>\r\n\r\n        {error && (\r\n          <div className=\"error-message\">\r\n            <p>Error: {error}</p>\r\n          </div>\r\n        )}\r\n\r\n        {/* Contenido de las pestañas */}\r\n        {showTable && (\r\n          <>\r\n            <div className=\"loans-container\" style={{ position: 'relative' }}>\r\n              {loading && (\r\n                <div style={{\r\n                  position: 'absolute',\r\n                  top: 0, left: 0, right: 0, bottom: 0,\r\n                  display: 'flex', alignItems: 'center', justifyContent: 'center',\r\n                  background: 'rgba(255,255,255,0.7)', zIndex: 2\r\n                }}>\r\n                  <LoadingSpinner />\r\n                </div>\r\n              )}\r\n              <div className=\"loans-table\" style={{ opacity: loading ? 0.5 : 1 }}>\r\n                <table>\r\n                  <thead>\r\n                    <tr>\r\n                      <th>Libro</th>\r\n                      <th>Lector</th>\r\n                      <th>Fecha Préstamo</th>\r\n                      <th>Fecha Vencimiento</th>\r\n                      <th>Estado</th>\r\n                      <th>Días Vencido</th>\r\n                      <th>Acciones</th>\r\n                    </tr>\r\n                  </thead>\r\n                  <tbody>\r\n                    {filteredLoans.length === 0 && !loading ? (\r\n                      <tr>\r\n                        <td colSpan=\"7\" style={{ textAlign: 'center', color: '#888' }}>\r\n                          No se encontraron préstamos\r\n                        </td>\r\n                      </tr>\r\n                    ) : (\r\n                      filteredLoans.map((loan) => (\r\n                        <tr\r\n                          key={loan.id}\r\n                          className={\r\n                            loan.status === 'OVERDUE'\r\n                              ? 'overdue-row'\r\n                              : loan.status === 'ACTIVE'\r\n                              ? 'active-row'\r\n                              : loan.status === 'RETURNED'\r\n                              ? 'returned-row'\r\n                              : ''\r\n                          }\r\n                        >\r\n                          <td>\r\n                            <div className=\"book-info\">\r\n                              <strong>{loan.bookTitle}</strong>\r\n                              <small>{loan.bookAuthor}</small>\r\n                            </div>\r\n                          </td>\r\n                          <td>\r\n                            <div className=\"reader-info\">\r\n                              <div>{loan.readerName}</div>\r\n                              <small>{loan.readerEmail}</small>\r\n                            </div>\r\n                          </td>\r\n                          <td>{formatDate(loan.loanDate)}</td>\r\n                          <td>{formatDate(loan.dueDate)}</td>\r\n                          <td>{getStatusBadge(loan.status)}</td>\r\n                          <td>\r\n                            {loan.status === 'OVERDUE' ? (\r\n                              <span className=\"days-late\">\r\n                                {getDaysLate(loan.dueDate)} días\r\n                              </span>\r\n                            ) : (\r\n                              '-'\r\n                            )}\r\n                          </td>\r\n                          <td>\r\n                            {loan.status === 'ACTIVE' || loan.status === 'OVERDUE' ? (\r\n                              <button\r\n                                onClick={() => openReturnModal(loan)}\r\n                                className=\"btn btn-success btn-sm\"\r\n                              >\r\n                                📤 Devolver\r\n                              </button>\r\n                            ) : (\r\n                              <span className=\"text-muted\">Ya devuelto</span>\r\n                            )}\r\n                          </td>\r\n                        </tr>\r\n                      ))\r\n                    )}\r\n                  </tbody>\r\n                </table>\r\n              </div>\r\n            </div>\r\n          </>\r\n        )}\r\n\r\n        {activeTab === 'stats' && (\r\n          <ReturnsStats loans={loans} />\r\n        )}\r\n\r\n        {/* Modal de confirmación de devolución */}\r\n        {showReturnModal && selectedLoan && (\r\n          <div className=\"modal-overlay\">\r\n            <div className=\"modal-content\">\r\n              <div className=\"modal-header\">\r\n                <h3>Confirmar Devolución</h3>\r\n                <button onClick={closeReturnModal} className=\"modal-close\">&times;</button>\r\n              </div>\r\n              <div className=\"modal-body\">\r\n                <p>¿Está seguro de que desea procesar la devolución del siguiente libro?</p>\r\n                <div className=\"return-details\">\r\n                  <p><strong>Libro:</strong> {selectedLoan.bookTitle}</p>\r\n                  <p><strong>Lector:</strong> {selectedLoan.readerName} ({selectedLoan.readerEmail})</p>\r\n                  <p><strong>Fecha de préstamo:</strong> {formatDate(selectedLoan.loanDate)}</p>\r\n                  <p><strong>Fecha de vencimiento:</strong> {formatDate(selectedLoan.dueDate)}</p>\r\n                  {selectedLoan.status === 'OVERDUE' && (\r\n                    <p className=\"overdue-warning\">\r\n                      ⚠️ Este préstamo está vencido por {getDaysLate(selectedLoan.dueDate)} días. \r\n                      Se aplicará una multa automáticamente.\r\n                    </p>\r\n                  )}\r\n                </div>\r\n              </div>\r\n              <div className=\"modal-footer\">\r\n                <button onClick={closeReturnModal} className=\"btn btn-secondary\">\r\n                  Cancelar\r\n                </button>\r\n                <button\r\n                  onClick={() => handleReturnLoan(selectedLoan.id)}\r\n                  className=\"btn btn-success\"\r\n                  disabled={returnLoading}\r\n                >\r\n                  {returnLoading ? 'Procesando...' : 'Confirmar Devolución'}\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </Layout>\r\n  );\r\n};\r\n\r\nexport default AdminReturnsPage; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}