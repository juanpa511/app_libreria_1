{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\jpval\\\\OneDrive\\\\Desktop\\\\jp\\\\aplicaciones web\\\\app_libreria_1\\\\Frontend\\\\src\\\\pages\\\\Admin\\\\AdminReturnsPage.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useCallback } from 'react';\nimport { useApi } from '../../hooks/useApi';\nimport loanService from '../../services/loanService';\nimport LoadingSpinner from '../../components/common/LoadingSpinner';\nimport Layout from '../../components/common/Layout';\nimport { useAuth } from '../../context/AuthContext';\nimport ReturnsStats from '../../components/admin/ReturnsStats';\nimport '../../styles/AdminReturnsPage.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AdminReturnsPage = () => {\n  _s();\n  const [loans, setLoans] = useState([]);\n  const [filteredLoans, setFilteredLoans] = useState([]);\n  const [filters, setFilters] = useState({\n    status: 'all',\n    // all, active, returned, overdue\n    readerEmail: '',\n    bookTitle: '',\n    startDate: '',\n    endDate: ''\n  });\n  const [pendingFilters, setPendingFilters] = useState({\n    status: 'all',\n    readerEmail: '',\n    bookTitle: '',\n    startDate: '',\n    endDate: ''\n  });\n  const [selectedLoan, setSelectedLoan] = useState(null);\n  const [showReturnModal, setShowReturnModal] = useState(false);\n  const [returnLoading, setReturnLoading] = useState(false);\n  const {\n    loading,\n    error,\n    handleApiCall\n  } = useApi();\n  const {\n    user,\n    isAdmin\n  } = useAuth();\n\n  // Función para mapear datos del backend a la estructura esperada por el frontend\n  const mapBookingToLoan = booking => {\n    var _booking$copyBook, _booking$copyBook$boo, _booking$copyBook2, _booking$copyBook2$bo, _booking$copyBook3, _booking$copyBook3$bo, _booking$user, _booking$user2;\n    const now = new Date();\n    const dueDate = new Date(booking.dateReturn);\n    const isOverdue = booking.state && dueDate < now;\n    return {\n      id: booking.idBooking,\n      bookTitle: ((_booking$copyBook = booking.copyBook) === null || _booking$copyBook === void 0 ? void 0 : (_booking$copyBook$boo = _booking$copyBook.book) === null || _booking$copyBook$boo === void 0 ? void 0 : _booking$copyBook$boo.title) || 'Título no disponible',\n      bookAuthor: ((_booking$copyBook2 = booking.copyBook) === null || _booking$copyBook2 === void 0 ? void 0 : (_booking$copyBook2$bo = _booking$copyBook2.book) === null || _booking$copyBook2$bo === void 0 ? void 0 : _booking$copyBook2$bo.author) || 'N/A',\n      bookIsbn: ((_booking$copyBook3 = booking.copyBook) === null || _booking$copyBook3 === void 0 ? void 0 : (_booking$copyBook3$bo = _booking$copyBook3.book) === null || _booking$copyBook3$bo === void 0 ? void 0 : _booking$copyBook3$bo.isbn) || 'N/A',\n      readerName: ((_booking$user = booking.user) === null || _booking$user === void 0 ? void 0 : _booking$user.name) || 'N/A',\n      readerEmail: ((_booking$user2 = booking.user) === null || _booking$user2 === void 0 ? void 0 : _booking$user2.email) || 'N/A',\n      loanDate: booking.dateBooking,\n      dueDate: booking.dateReturn,\n      returnDate: booking.state ? null : new Date().toISOString(),\n      // Si no está activo, se considera devuelto\n      status: booking.state ? isOverdue ? 'OVERDUE' : 'ACTIVE' : 'RETURNED',\n      state: booking.state,\n      // Agregar datos originales para compatibilidad con el backend\n      originalBooking: booking,\n      // Agregar campos adicionales para compatibilidad\n      idBooking: booking.idBooking,\n      user: booking.user,\n      copyBook: booking.copyBook\n    };\n  };\n\n  // Cargar préstamos\n  const loadLoans = useCallback(async () => {\n    try {\n      const response = await handleApiCall(loanService.getAllLoans);\n      if (response) {\n        const mappedLoans = response.map(mapBookingToLoan);\n        setLoans(mappedLoans);\n        applyFilters(mappedLoans);\n      }\n    } catch (err) {\n      console.error('Error loading loans:', err);\n    }\n  }, [handleApiCall]);\n  useEffect(() => {\n    loadLoans();\n  }, [loadLoans]);\n  useEffect(() => {\n    applyFilters();\n  }, [loans, filters]);\n  const applyFilters = (loansToFilter = loans) => {\n    let filtered = [...loansToFilter];\n\n    // Filtro por estado\n    if (filters.status !== 'all') {\n      switch (filters.status) {\n        case 'active':\n          filtered = filtered.filter(loan => loan.status === 'ACTIVE');\n          break;\n        case 'returned':\n          filtered = filtered.filter(loan => loan.status === 'RETURNED');\n          break;\n        case 'overdue':\n          filtered = filtered.filter(loan => loan.status === 'OVERDUE');\n          break;\n        default:\n          break;\n      }\n    }\n\n    // Filtro por email del lector\n    if (filters.readerEmail) {\n      filtered = filtered.filter(loan => loan.readerEmail.toLowerCase().includes(filters.readerEmail.toLowerCase()));\n    }\n\n    // Filtro por título del libro\n    if (filters.bookTitle) {\n      filtered = filtered.filter(loan => loan.bookTitle.toLowerCase().includes(filters.bookTitle.toLowerCase()));\n    }\n\n    // Filtro por fecha de préstamo\n    if (filters.startDate) {\n      filtered = filtered.filter(loan => new Date(loan.loanDate) >= new Date(filters.startDate));\n    }\n    if (filters.endDate) {\n      filtered = filtered.filter(loan => new Date(loan.loanDate) <= new Date(filters.endDate));\n    }\n    setFilteredLoans(filtered);\n  };\n  const handleFilterChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setPendingFilters(prev => ({\n      ...prev,\n      [name]: value\n    }));\n  };\n  const applyPendingFilters = () => {\n    setFilters({\n      ...pendingFilters\n    });\n  };\n  const resetFilters = () => {\n    const resetFilters = {\n      status: 'all',\n      readerEmail: '',\n      bookTitle: '',\n      startDate: '',\n      endDate: ''\n    };\n    setFilters(resetFilters);\n    setPendingFilters(resetFilters);\n  };\n  const handleReturnLoan = async loanId => {\n    try {\n      setReturnLoading(true);\n      await handleApiCall(loanService.returnLoan, loanId);\n      setShowReturnModal(false);\n      setSelectedLoan(null);\n      loadLoans();\n      alert('Libro devuelto exitosamente');\n    } catch (err) {\n      console.error('Error returning loan:', err);\n      alert(`Error al devolver el libro: ${err.message}`);\n    } finally {\n      setReturnLoading(false);\n    }\n  };\n  const openReturnModal = loan => {\n    setSelectedLoan(loan);\n    setShowReturnModal(true);\n  };\n  const closeReturnModal = () => {\n    setShowReturnModal(false);\n    setSelectedLoan(null);\n  };\n  const formatDate = dateString => {\n    if (!dateString) return 'N/A';\n    return new Date(dateString).toLocaleDateString('es-ES', {\n      year: 'numeric',\n      month: '2-digit',\n      day: '2-digit',\n      hour: '2-digit',\n      minute: '2-digit'\n    });\n  };\n  const getStatusBadge = status => {\n    const statusConfig = {\n      'ACTIVE': {\n        text: 'Activo',\n        className: 'badge-success'\n      },\n      'RETURNED': {\n        text: 'Devuelto',\n        className: 'badge-info'\n      },\n      'OVERDUE': {\n        text: 'Vencido',\n        className: 'badge-danger'\n      }\n    };\n    const config = statusConfig[status] || {\n      text: status,\n      className: 'badge-secondary'\n    };\n    return /*#__PURE__*/_jsxDEV(\"span\", {\n      className: `badge ${config.className}`,\n      children: config.text\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 202,\n      columnNumber: 12\n    }, this);\n  };\n  const getDaysLate = dueDate => {\n    const now = new Date();\n    const due = new Date(dueDate);\n    const diffTime = now - due;\n    const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));\n    return diffDays > 0 ? diffDays : 0;\n  };\n\n  // Estadísticas\n  const stats = {\n    total: loans.length,\n    active: loans.filter(loan => loan.status === 'ACTIVE').length,\n    returned: loans.filter(loan => loan.status === 'RETURNED').length,\n    overdue: loans.filter(loan => loan.status === 'OVERDUE').length,\n    totalOverdueDays: loans.filter(loan => loan.status === 'OVERDUE').reduce((total, loan) => total + getDaysLate(loan.dueDate), 0)\n  };\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(Layout, {\n      children: /*#__PURE__*/_jsxDEV(LoadingSpinner, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 227,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 226,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(Layout, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"admin-returns-page\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"page-header\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          children: \"\\uD83D\\uDCE4 Gesti\\xF3n de Devoluciones\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 236,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Administra las devoluciones de libros y monitorea el estado de los pr\\xE9stamos\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 237,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 235,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"stats-grid\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"stat-card\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"stat-icon\",\n            children: \"\\uD83D\\uDCDA\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 243,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"stat-content\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              children: \"Total Pr\\xE9stamos\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 245,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"stat-number\",\n              children: stats.total\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 246,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 244,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 242,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"stat-card\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"stat-icon\",\n            children: \"\\uD83D\\uDD04\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 250,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"stat-content\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              children: \"Pr\\xE9stamos Activos\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 252,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"stat-number\",\n              children: stats.active\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 253,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 251,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 249,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"stat-card\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"stat-icon\",\n            children: \"\\u2705\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 257,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"stat-content\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              children: \"Libros Devueltos\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 259,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"stat-number\",\n              children: stats.returned\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 260,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 258,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 256,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"stat-card\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"stat-icon\",\n            children: \"\\u26A0\\uFE0F\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 264,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"stat-content\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              children: \"Pr\\xE9stamos Vencidos\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 266,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"stat-number\",\n              children: stats.overdue\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 267,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 265,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 263,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 241,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"filters-section\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"filters-grid\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"filter-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Estado:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 276,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n              name: \"status\",\n              value: pendingFilters.status,\n              onChange: handleFilterChange,\n              className: \"filter-select\",\n              children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"all\",\n                children: \"Todos los estados\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 283,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"active\",\n                children: \"Activos\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 284,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"returned\",\n                children: \"Devueltos\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 285,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"overdue\",\n                children: \"Vencidos\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 286,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 277,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 275,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"filter-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Email del Lector:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 291,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              name: \"readerEmail\",\n              value: pendingFilters.readerEmail,\n              onChange: handleFilterChange,\n              placeholder: \"Buscar por email...\",\n              className: \"filter-input\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 292,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 290,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"filter-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"T\\xEDtulo del Libro:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 303,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              name: \"bookTitle\",\n              value: pendingFilters.bookTitle,\n              onChange: handleFilterChange,\n              placeholder: \"Buscar por t\\xEDtulo...\",\n              className: \"filter-input\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 304,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 302,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"filter-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Fecha Desde:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 315,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"date\",\n              name: \"startDate\",\n              value: pendingFilters.startDate,\n              onChange: handleFilterChange,\n              className: \"filter-input\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 316,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 314,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"filter-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Fecha Hasta:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 326,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"date\",\n              name: \"endDate\",\n              value: pendingFilters.endDate,\n              onChange: handleFilterChange,\n              className: \"filter-input\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 327,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 325,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 274,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"filter-actions\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: applyPendingFilters,\n            className: \"btn btn-primary\",\n            children: \"Aplicar Filtros\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 338,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: resetFilters,\n            className: \"btn btn-secondary\",\n            children: \"Limpiar Filtros\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 341,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 337,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"results-info\",\n          children: [\"Mostrando \", filteredLoans.length, \" de \", loans.length, \" pr\\xE9stamos\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 346,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 273,\n        columnNumber: 9\n      }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"error-message\",\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Error: \", error]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 353,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 352,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"loans-container\",\n        children: filteredLoans.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"no-loans\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"no-loans-icon\",\n            children: \"\\uD83D\\uDCDA\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 361,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"No se encontraron pr\\xE9stamos\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 362,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"No hay pr\\xE9stamos que coincidan con los criterios de b\\xFAsqueda seleccionados\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 363,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 360,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"loans-table\",\n          children: /*#__PURE__*/_jsxDEV(\"table\", {\n            children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n              children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"Libro\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 370,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"Lector\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 371,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"Fecha Pr\\xE9stamo\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 372,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"Fecha Vencimiento\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 373,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"Estado\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 374,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"D\\xEDas Vencido\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 375,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"Acciones\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 376,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 369,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 368,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n              children: filteredLoans.map(loan => /*#__PURE__*/_jsxDEV(\"tr\", {\n                className: loan.status === 'OVERDUE' ? 'overdue-row' : '',\n                children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"book-info\",\n                    children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                      children: loan.bookTitle\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 384,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"small\", {\n                      children: loan.bookAuthor\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 385,\n                      columnNumber: 27\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 383,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 382,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"reader-info\",\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      children: loan.readerName\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 390,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"small\", {\n                      children: loan.readerEmail\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 391,\n                      columnNumber: 27\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 389,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 388,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: formatDate(loan.loanDate)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 394,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: formatDate(loan.dueDate)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 395,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: getStatusBadge(loan.status)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 396,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: loan.status === 'OVERDUE' ? /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"days-late\",\n                    children: [getDaysLate(loan.dueDate), \" d\\xEDas\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 399,\n                    columnNumber: 27\n                  }, this) : '-'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 397,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: loan.status === 'ACTIVE' || loan.status === 'OVERDUE' ? /*#__PURE__*/_jsxDEV(\"button\", {\n                    onClick: () => openReturnModal(loan),\n                    className: \"btn btn-success btn-sm\",\n                    children: \"\\uD83D\\uDCE4 Devolver\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 408,\n                    columnNumber: 27\n                  }, this) : /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"text-muted\",\n                    children: \"Ya devuelto\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 415,\n                    columnNumber: 27\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 406,\n                  columnNumber: 23\n                }, this)]\n              }, loan.id, true, {\n                fileName: _jsxFileName,\n                lineNumber: 381,\n                columnNumber: 21\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 379,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 367,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 366,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 358,\n        columnNumber: 9\n      }, this), showReturnModal && selectedLoan && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"modal-overlay\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"modal-content\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"modal-header\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              children: \"Confirmar Devoluci\\xF3n\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 431,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: closeReturnModal,\n              className: \"modal-close\",\n              children: \"\\xD7\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 432,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 430,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"modal-body\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"\\xBFEst\\xE1 seguro de que desea procesar la devoluci\\xF3n del siguiente libro?\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 435,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"return-details\",\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: \"Libro:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 437,\n                  columnNumber: 22\n                }, this), \" \", selectedLoan.bookTitle]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 437,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: \"Lector:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 438,\n                  columnNumber: 22\n                }, this), \" \", selectedLoan.readerName, \" (\", selectedLoan.readerEmail, \")\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 438,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: \"Fecha de pr\\xE9stamo:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 439,\n                  columnNumber: 22\n                }, this), \" \", formatDate(selectedLoan.loanDate)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 439,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: \"Fecha de vencimiento:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 440,\n                  columnNumber: 22\n                }, this), \" \", formatDate(selectedLoan.dueDate)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 440,\n                columnNumber: 19\n              }, this), selectedLoan.status === 'OVERDUE' && /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"overdue-warning\",\n                children: [\"\\u26A0\\uFE0F Este pr\\xE9stamo est\\xE1 vencido por \", getDaysLate(selectedLoan.dueDate), \" d\\xEDas. Se aplicar\\xE1 una multa autom\\xE1ticamente.\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 442,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 436,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 434,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"modal-footer\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: closeReturnModal,\n              className: \"btn btn-secondary\",\n              children: \"Cancelar\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 450,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => handleReturnLoan(selectedLoan.id),\n              className: \"btn btn-success\",\n              disabled: returnLoading,\n              children: returnLoading ? 'Procesando...' : 'Confirmar Devolución'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 453,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 449,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 429,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 428,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 234,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 233,\n    columnNumber: 5\n  }, this);\n};\n_s(AdminReturnsPage, \"nOXgB4KYM/5/1aqB+oK1hr2auVc=\", false, function () {\n  return [useApi, useAuth];\n});\n_c = AdminReturnsPage;\nexport default AdminReturnsPage;\nvar _c;\n$RefreshReg$(_c, \"AdminReturnsPage\");","map":{"version":3,"names":["React","useState","useEffect","useCallback","useApi","loanService","LoadingSpinner","Layout","useAuth","ReturnsStats","jsxDEV","_jsxDEV","AdminReturnsPage","_s","loans","setLoans","filteredLoans","setFilteredLoans","filters","setFilters","status","readerEmail","bookTitle","startDate","endDate","pendingFilters","setPendingFilters","selectedLoan","setSelectedLoan","showReturnModal","setShowReturnModal","returnLoading","setReturnLoading","loading","error","handleApiCall","user","isAdmin","mapBookingToLoan","booking","_booking$copyBook","_booking$copyBook$boo","_booking$copyBook2","_booking$copyBook2$bo","_booking$copyBook3","_booking$copyBook3$bo","_booking$user","_booking$user2","now","Date","dueDate","dateReturn","isOverdue","state","id","idBooking","copyBook","book","title","bookAuthor","author","bookIsbn","isbn","readerName","name","email","loanDate","dateBooking","returnDate","toISOString","originalBooking","loadLoans","response","getAllLoans","mappedLoans","map","applyFilters","err","console","loansToFilter","filtered","filter","loan","toLowerCase","includes","handleFilterChange","e","value","target","prev","applyPendingFilters","resetFilters","handleReturnLoan","loanId","returnLoan","alert","message","openReturnModal","closeReturnModal","formatDate","dateString","toLocaleDateString","year","month","day","hour","minute","getStatusBadge","statusConfig","text","className","config","children","fileName","_jsxFileName","lineNumber","columnNumber","getDaysLate","due","diffTime","diffDays","Math","ceil","stats","total","length","active","returned","overdue","totalOverdueDays","reduce","onChange","type","placeholder","onClick","disabled","_c","$RefreshReg$"],"sources":["C:/Users/jpval/OneDrive/Desktop/jp/aplicaciones web/app_libreria_1/Frontend/src/pages/Admin/AdminReturnsPage.js"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\r\nimport { useApi } from '../../hooks/useApi';\r\nimport loanService from '../../services/loanService';\r\nimport LoadingSpinner from '../../components/common/LoadingSpinner';\r\nimport Layout from '../../components/common/Layout';\r\nimport { useAuth } from '../../context/AuthContext';\r\nimport ReturnsStats from '../../components/admin/ReturnsStats';\r\nimport '../../styles/AdminReturnsPage.css';\r\n\r\nconst AdminReturnsPage = () => {\r\n  const [loans, setLoans] = useState([]);\r\n  const [filteredLoans, setFilteredLoans] = useState([]);\r\n  const [filters, setFilters] = useState({\r\n    status: 'all', // all, active, returned, overdue\r\n    readerEmail: '',\r\n    bookTitle: '',\r\n    startDate: '',\r\n    endDate: ''\r\n  });\r\n  const [pendingFilters, setPendingFilters] = useState({\r\n    status: 'all',\r\n    readerEmail: '',\r\n    bookTitle: '',\r\n    startDate: '',\r\n    endDate: ''\r\n  });\r\n  const [selectedLoan, setSelectedLoan] = useState(null);\r\n  const [showReturnModal, setShowReturnModal] = useState(false);\r\n  const [returnLoading, setReturnLoading] = useState(false);\r\n\r\n  const { loading, error, handleApiCall } = useApi();\r\n  const { user, isAdmin } = useAuth();\r\n\r\n  // Función para mapear datos del backend a la estructura esperada por el frontend\r\n  const mapBookingToLoan = (booking) => {\r\n    const now = new Date();\r\n    const dueDate = new Date(booking.dateReturn);\r\n    const isOverdue = booking.state && dueDate < now;\r\n    \r\n    return {\r\n      id: booking.idBooking,\r\n      bookTitle: booking.copyBook?.book?.title || 'Título no disponible',\r\n      bookAuthor: booking.copyBook?.book?.author || 'N/A',\r\n      bookIsbn: booking.copyBook?.book?.isbn || 'N/A',\r\n      readerName: booking.user?.name || 'N/A',\r\n      readerEmail: booking.user?.email || 'N/A',\r\n      loanDate: booking.dateBooking,\r\n      dueDate: booking.dateReturn,\r\n      returnDate: booking.state ? null : new Date().toISOString(), // Si no está activo, se considera devuelto\r\n      status: booking.state ? (isOverdue ? 'OVERDUE' : 'ACTIVE') : 'RETURNED',\r\n      state: booking.state,\r\n      // Agregar datos originales para compatibilidad con el backend\r\n      originalBooking: booking,\r\n      // Agregar campos adicionales para compatibilidad\r\n      idBooking: booking.idBooking,\r\n      user: booking.user,\r\n      copyBook: booking.copyBook\r\n    };\r\n  };\r\n\r\n  // Cargar préstamos\r\n  const loadLoans = useCallback(async () => {\r\n    try {\r\n      const response = await handleApiCall(loanService.getAllLoans);\r\n      if (response) {\r\n        const mappedLoans = response.map(mapBookingToLoan);\r\n        setLoans(mappedLoans);\r\n        applyFilters(mappedLoans);\r\n      }\r\n    } catch (err) {\r\n      console.error('Error loading loans:', err);\r\n    }\r\n  }, [handleApiCall]);\r\n\r\n  useEffect(() => {\r\n    loadLoans();\r\n  }, [loadLoans]);\r\n\r\n  useEffect(() => {\r\n    applyFilters();\r\n  }, [loans, filters]);\r\n\r\n  const applyFilters = (loansToFilter = loans) => {\r\n    let filtered = [...loansToFilter];\r\n\r\n    // Filtro por estado\r\n    if (filters.status !== 'all') {\r\n      switch (filters.status) {\r\n        case 'active':\r\n          filtered = filtered.filter(loan => loan.status === 'ACTIVE');\r\n          break;\r\n        case 'returned':\r\n          filtered = filtered.filter(loan => loan.status === 'RETURNED');\r\n          break;\r\n        case 'overdue':\r\n          filtered = filtered.filter(loan => loan.status === 'OVERDUE');\r\n          break;\r\n        default:\r\n          break;\r\n      }\r\n    }\r\n\r\n    // Filtro por email del lector\r\n    if (filters.readerEmail) {\r\n      filtered = filtered.filter(loan =>\r\n        loan.readerEmail.toLowerCase().includes(filters.readerEmail.toLowerCase())\r\n      );\r\n    }\r\n\r\n    // Filtro por título del libro\r\n    if (filters.bookTitle) {\r\n      filtered = filtered.filter(loan =>\r\n        loan.bookTitle.toLowerCase().includes(filters.bookTitle.toLowerCase())\r\n      );\r\n    }\r\n\r\n    // Filtro por fecha de préstamo\r\n    if (filters.startDate) {\r\n      filtered = filtered.filter(loan =>\r\n        new Date(loan.loanDate) >= new Date(filters.startDate)\r\n      );\r\n    }\r\n\r\n    if (filters.endDate) {\r\n      filtered = filtered.filter(loan =>\r\n        new Date(loan.loanDate) <= new Date(filters.endDate)\r\n      );\r\n    }\r\n\r\n    setFilteredLoans(filtered);\r\n  };\r\n\r\n  const handleFilterChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setPendingFilters(prev => ({\r\n      ...prev,\r\n      [name]: value\r\n    }));\r\n  };\r\n\r\n  const applyPendingFilters = () => {\r\n    setFilters({ ...pendingFilters });\r\n  };\r\n\r\n  const resetFilters = () => {\r\n    const resetFilters = {\r\n      status: 'all',\r\n      readerEmail: '',\r\n      bookTitle: '',\r\n      startDate: '',\r\n      endDate: ''\r\n    };\r\n    setFilters(resetFilters);\r\n    setPendingFilters(resetFilters);\r\n  };\r\n\r\n  const handleReturnLoan = async (loanId) => {\r\n    try {\r\n      setReturnLoading(true);\r\n      await handleApiCall(loanService.returnLoan, loanId);\r\n      setShowReturnModal(false);\r\n      setSelectedLoan(null);\r\n      loadLoans();\r\n      alert('Libro devuelto exitosamente');\r\n    } catch (err) {\r\n      console.error('Error returning loan:', err);\r\n      alert(`Error al devolver el libro: ${err.message}`);\r\n    } finally {\r\n      setReturnLoading(false);\r\n    }\r\n  };\r\n\r\n  const openReturnModal = (loan) => {\r\n    setSelectedLoan(loan);\r\n    setShowReturnModal(true);\r\n  };\r\n\r\n  const closeReturnModal = () => {\r\n    setShowReturnModal(false);\r\n    setSelectedLoan(null);\r\n  };\r\n\r\n  const formatDate = (dateString) => {\r\n    if (!dateString) return 'N/A';\r\n    return new Date(dateString).toLocaleDateString('es-ES', {\r\n      year: 'numeric',\r\n      month: '2-digit',\r\n      day: '2-digit',\r\n      hour: '2-digit',\r\n      minute: '2-digit'\r\n    });\r\n  };\r\n\r\n  const getStatusBadge = (status) => {\r\n    const statusConfig = {\r\n      'ACTIVE': { text: 'Activo', className: 'badge-success' },\r\n      'RETURNED': { text: 'Devuelto', className: 'badge-info' },\r\n      'OVERDUE': { text: 'Vencido', className: 'badge-danger' }\r\n    };\r\n    \r\n    const config = statusConfig[status] || { text: status, className: 'badge-secondary' };\r\n    return <span className={`badge ${config.className}`}>{config.text}</span>;\r\n  };\r\n\r\n  const getDaysLate = (dueDate) => {\r\n    const now = new Date();\r\n    const due = new Date(dueDate);\r\n    const diffTime = now - due;\r\n    const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));\r\n    return diffDays > 0 ? diffDays : 0;\r\n  };\r\n\r\n  // Estadísticas\r\n  const stats = {\r\n    total: loans.length,\r\n    active: loans.filter(loan => loan.status === 'ACTIVE').length,\r\n    returned: loans.filter(loan => loan.status === 'RETURNED').length,\r\n    overdue: loans.filter(loan => loan.status === 'OVERDUE').length,\r\n    totalOverdueDays: loans\r\n      .filter(loan => loan.status === 'OVERDUE')\r\n      .reduce((total, loan) => total + getDaysLate(loan.dueDate), 0)\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <Layout>\r\n        <LoadingSpinner />\r\n      </Layout>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <Layout>\r\n      <div className=\"admin-returns-page\">\r\n        <div className=\"page-header\">\r\n          <h1>📤 Gestión de Devoluciones</h1>\r\n          <p>Administra las devoluciones de libros y monitorea el estado de los préstamos</p>\r\n        </div>\r\n\r\n        {/* Estadísticas */}\r\n        <div className=\"stats-grid\">\r\n          <div className=\"stat-card\">\r\n            <div className=\"stat-icon\">📚</div>\r\n            <div className=\"stat-content\">\r\n              <h3>Total Préstamos</h3>\r\n              <p className=\"stat-number\">{stats.total}</p>\r\n            </div>\r\n          </div>\r\n          <div className=\"stat-card\">\r\n            <div className=\"stat-icon\">🔄</div>\r\n            <div className=\"stat-content\">\r\n              <h3>Préstamos Activos</h3>\r\n              <p className=\"stat-number\">{stats.active}</p>\r\n            </div>\r\n          </div>\r\n          <div className=\"stat-card\">\r\n            <div className=\"stat-icon\">✅</div>\r\n            <div className=\"stat-content\">\r\n              <h3>Libros Devueltos</h3>\r\n              <p className=\"stat-number\">{stats.returned}</p>\r\n            </div>\r\n          </div>\r\n          <div className=\"stat-card\">\r\n            <div className=\"stat-icon\">⚠️</div>\r\n            <div className=\"stat-content\">\r\n              <h3>Préstamos Vencidos</h3>\r\n              <p className=\"stat-number\">{stats.overdue}</p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Filtros */}\r\n        <div className=\"filters-section\">\r\n          <div className=\"filters-grid\">\r\n            <div className=\"filter-group\">\r\n              <label>Estado:</label>\r\n              <select\r\n                name=\"status\"\r\n                value={pendingFilters.status}\r\n                onChange={handleFilterChange}\r\n                className=\"filter-select\"\r\n              >\r\n                <option value=\"all\">Todos los estados</option>\r\n                <option value=\"active\">Activos</option>\r\n                <option value=\"returned\">Devueltos</option>\r\n                <option value=\"overdue\">Vencidos</option>\r\n              </select>\r\n            </div>\r\n\r\n            <div className=\"filter-group\">\r\n              <label>Email del Lector:</label>\r\n              <input\r\n                type=\"text\"\r\n                name=\"readerEmail\"\r\n                value={pendingFilters.readerEmail}\r\n                onChange={handleFilterChange}\r\n                placeholder=\"Buscar por email...\"\r\n                className=\"filter-input\"\r\n              />\r\n            </div>\r\n\r\n            <div className=\"filter-group\">\r\n              <label>Título del Libro:</label>\r\n              <input\r\n                type=\"text\"\r\n                name=\"bookTitle\"\r\n                value={pendingFilters.bookTitle}\r\n                onChange={handleFilterChange}\r\n                placeholder=\"Buscar por título...\"\r\n                className=\"filter-input\"\r\n              />\r\n            </div>\r\n\r\n            <div className=\"filter-group\">\r\n              <label>Fecha Desde:</label>\r\n              <input\r\n                type=\"date\"\r\n                name=\"startDate\"\r\n                value={pendingFilters.startDate}\r\n                onChange={handleFilterChange}\r\n                className=\"filter-input\"\r\n              />\r\n            </div>\r\n\r\n            <div className=\"filter-group\">\r\n              <label>Fecha Hasta:</label>\r\n              <input\r\n                type=\"date\"\r\n                name=\"endDate\"\r\n                value={pendingFilters.endDate}\r\n                onChange={handleFilterChange}\r\n                className=\"filter-input\"\r\n              />\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"filter-actions\">\r\n            <button onClick={applyPendingFilters} className=\"btn btn-primary\">\r\n              Aplicar Filtros\r\n            </button>\r\n            <button onClick={resetFilters} className=\"btn btn-secondary\">\r\n              Limpiar Filtros\r\n            </button>\r\n          </div>\r\n\r\n          <div className=\"results-info\">\r\n            Mostrando {filteredLoans.length} de {loans.length} préstamos\r\n          </div>\r\n        </div>\r\n\r\n        {error && (\r\n          <div className=\"error-message\">\r\n            <p>Error: {error}</p>\r\n          </div>\r\n        )}\r\n\r\n        {/* Lista de préstamos */}\r\n        <div className=\"loans-container\">\r\n          {filteredLoans.length === 0 ? (\r\n            <div className=\"no-loans\">\r\n              <div className=\"no-loans-icon\">📚</div>\r\n              <h3>No se encontraron préstamos</h3>\r\n              <p>No hay préstamos que coincidan con los criterios de búsqueda seleccionados</p>\r\n            </div>\r\n          ) : (\r\n            <div className=\"loans-table\">\r\n              <table>\r\n                <thead>\r\n                  <tr>\r\n                    <th>Libro</th>\r\n                    <th>Lector</th>\r\n                    <th>Fecha Préstamo</th>\r\n                    <th>Fecha Vencimiento</th>\r\n                    <th>Estado</th>\r\n                    <th>Días Vencido</th>\r\n                    <th>Acciones</th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody>\r\n                  {filteredLoans.map((loan) => (\r\n                    <tr key={loan.id} className={loan.status === 'OVERDUE' ? 'overdue-row' : ''}>\r\n                      <td>\r\n                        <div className=\"book-info\">\r\n                          <strong>{loan.bookTitle}</strong>\r\n                          <small>{loan.bookAuthor}</small>\r\n                        </div>\r\n                      </td>\r\n                      <td>\r\n                        <div className=\"reader-info\">\r\n                          <div>{loan.readerName}</div>\r\n                          <small>{loan.readerEmail}</small>\r\n                        </div>\r\n                      </td>\r\n                      <td>{formatDate(loan.loanDate)}</td>\r\n                      <td>{formatDate(loan.dueDate)}</td>\r\n                      <td>{getStatusBadge(loan.status)}</td>\r\n                      <td>\r\n                        {loan.status === 'OVERDUE' ? (\r\n                          <span className=\"days-late\">\r\n                            {getDaysLate(loan.dueDate)} días\r\n                          </span>\r\n                        ) : (\r\n                          '-'\r\n                        )}\r\n                      </td>\r\n                      <td>\r\n                        {loan.status === 'ACTIVE' || loan.status === 'OVERDUE' ? (\r\n                          <button\r\n                            onClick={() => openReturnModal(loan)}\r\n                            className=\"btn btn-success btn-sm\"\r\n                          >\r\n                            📤 Devolver\r\n                          </button>\r\n                        ) : (\r\n                          <span className=\"text-muted\">Ya devuelto</span>\r\n                        )}\r\n                      </td>\r\n                    </tr>\r\n                  ))}\r\n                </tbody>\r\n              </table>\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/* Modal de confirmación de devolución */}\r\n        {showReturnModal && selectedLoan && (\r\n          <div className=\"modal-overlay\">\r\n            <div className=\"modal-content\">\r\n              <div className=\"modal-header\">\r\n                <h3>Confirmar Devolución</h3>\r\n                <button onClick={closeReturnModal} className=\"modal-close\">&times;</button>\r\n              </div>\r\n              <div className=\"modal-body\">\r\n                <p>¿Está seguro de que desea procesar la devolución del siguiente libro?</p>\r\n                <div className=\"return-details\">\r\n                  <p><strong>Libro:</strong> {selectedLoan.bookTitle}</p>\r\n                  <p><strong>Lector:</strong> {selectedLoan.readerName} ({selectedLoan.readerEmail})</p>\r\n                  <p><strong>Fecha de préstamo:</strong> {formatDate(selectedLoan.loanDate)}</p>\r\n                  <p><strong>Fecha de vencimiento:</strong> {formatDate(selectedLoan.dueDate)}</p>\r\n                  {selectedLoan.status === 'OVERDUE' && (\r\n                    <p className=\"overdue-warning\">\r\n                      ⚠️ Este préstamo está vencido por {getDaysLate(selectedLoan.dueDate)} días. \r\n                      Se aplicará una multa automáticamente.\r\n                    </p>\r\n                  )}\r\n                </div>\r\n              </div>\r\n              <div className=\"modal-footer\">\r\n                <button onClick={closeReturnModal} className=\"btn btn-secondary\">\r\n                  Cancelar\r\n                </button>\r\n                <button\r\n                  onClick={() => handleReturnLoan(selectedLoan.id)}\r\n                  className=\"btn btn-success\"\r\n                  disabled={returnLoading}\r\n                >\r\n                  {returnLoading ? 'Procesando...' : 'Confirmar Devolución'}\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </Layout>\r\n  );\r\n};\r\n\r\nexport default AdminReturnsPage; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}