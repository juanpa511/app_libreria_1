{"ast":null,"code":"var _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\n// src/hooks/useApi.js\n\nimport { useState, useEffect } from 'react';\nimport { useAuth } from '../context/AuthContext';\nexport const useApi = () => {\n  _s();\n  const {\n    logout\n  } = useAuth();\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const handleApiCall = async (apiFunction, ...args) => {\n    try {\n      setLoading(true);\n      setError(null);\n      const result = await apiFunction(...args);\n      return result;\n    } catch (error) {\n      // Si el error es de autenticación, hacer logout automático\n      if (error.message.includes('401') || error.message.includes('Unauthorized')) {\n        logout();\n        window.location.href = '/login';\n      }\n      setError(error.message);\n      throw error;\n    } finally {\n      setLoading(false);\n    }\n  };\n  const clearError = () => {\n    setError(null);\n  };\n  return {\n    loading,\n    error,\n    handleApiCall,\n    clearError\n  };\n};\n\n// Hook específico para obtener datos con useEffect\n_s(useApi, \"HELn7iTAXxO6SMiGHdY4UBBUQ98=\", false, function () {\n  return [useAuth];\n});\nexport const useApiData = (apiFunction, dependencies = []) => {\n  _s2();\n  const [data, setData] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const {\n    logout\n  } = useAuth();\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        setLoading(true);\n        setError(null);\n        const result = await apiFunction();\n        setData(result);\n      } catch (error) {\n        if (error.message.includes('401') || error.message.includes('Unauthorized')) {\n          logout();\n          window.location.href = '/login';\n        }\n        setError(error.message);\n      } finally {\n        setLoading(false);\n      }\n    };\n    fetchData();\n  }, dependencies);\n  const refetch = async () => {\n    try {\n      setLoading(true);\n      setError(null);\n      const result = await apiFunction();\n      setData(result);\n    } catch (error) {\n      if (error.message.includes('401') || error.message.includes('Unauthorized')) {\n        logout();\n        window.location.href = '/login';\n      }\n      setError(error.message);\n    } finally {\n      setLoading(false);\n    }\n  };\n  return {\n    data,\n    loading,\n    error,\n    refetch\n  };\n};\n_s2(useApiData, \"Wc/r7U/TnPVKzY811SE2IUmQepg=\", false, function () {\n  return [useAuth];\n});\nexport default useApi;","map":{"version":3,"names":["useState","useEffect","useAuth","useApi","_s","logout","loading","setLoading","error","setError","handleApiCall","apiFunction","args","result","message","includes","window","location","href","clearError","useApiData","dependencies","_s2","data","setData","fetchData","refetch"],"sources":["D:/u/desarrolloApp/juanpa/app_libreria_1/Frontend/src/hooks/useApi.js"],"sourcesContent":["// src/hooks/useApi.js\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport { useAuth } from '../context/AuthContext';\r\n\r\nexport const useApi = () => {\r\n  const { logout } = useAuth();\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState(null);\r\n\r\n  const handleApiCall = async (apiFunction, ...args) => {\r\n    try {\r\n      setLoading(true);\r\n      setError(null);\r\n      \r\n      const result = await apiFunction(...args);\r\n      return result;\r\n    } catch (error) {\r\n      // Si el error es de autenticación, hacer logout automático\r\n      if (error.message.includes('401') || error.message.includes('Unauthorized')) {\r\n        logout();\r\n        window.location.href = '/login';\r\n      }\r\n      \r\n      setError(error.message);\r\n      throw error;\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const clearError = () => {\r\n    setError(null);\r\n  };\r\n\r\n  return {\r\n    loading,\r\n    error,\r\n    handleApiCall,\r\n    clearError\r\n  };\r\n};\r\n\r\n// Hook específico para obtener datos con useEffect\r\nexport const useApiData = (apiFunction, dependencies = []) => {\r\n  const [data, setData] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  const { logout } = useAuth();\r\n\r\n  useEffect(() => {\r\n    const fetchData = async () => {\r\n      try {\r\n        setLoading(true);\r\n        setError(null);\r\n        \r\n        const result = await apiFunction();\r\n        setData(result);\r\n      } catch (error) {\r\n        if (error.message.includes('401') || error.message.includes('Unauthorized')) {\r\n          logout();\r\n          window.location.href = '/login';\r\n        }\r\n        \r\n        setError(error.message);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchData();\r\n  }, dependencies);\r\n\r\n  const refetch = async () => {\r\n    try {\r\n      setLoading(true);\r\n      setError(null);\r\n      \r\n      const result = await apiFunction();\r\n      setData(result);\r\n    } catch (error) {\r\n      if (error.message.includes('401') || error.message.includes('Unauthorized')) {\r\n        logout();\r\n        window.location.href = '/login';\r\n      }\r\n      \r\n      setError(error.message);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return {\r\n    data,\r\n    loading,\r\n    error,\r\n    refetch\r\n  };\r\n};\r\n\r\nexport default useApi;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}