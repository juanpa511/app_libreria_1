{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\jpval\\\\OneDrive\\\\Desktop\\\\jp\\\\aplicaciones web\\\\app_libreria_1\\\\Frontend\\\\src\\\\components\\\\common\\\\AuthTest.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport { useAuth } from '../../context/AuthContext';\nimport apiService from '../../services/apiService';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AuthTest = () => {\n  _s();\n  const {\n    user,\n    login,\n    isAdmin\n  } = useAuth();\n  const [testEmail, setTestEmail] = useState('');\n  const [testPassword, setTestPassword] = useState('');\n  const [message, setMessage] = useState('');\n  const handleTestLogin = async () => {\n    try {\n      setMessage('Probando login...');\n      const result = await login(testEmail, testPassword);\n      if (result.success) {\n        setMessage('Login exitoso!');\n      } else {\n        setMessage(`Error: ${result.error}`);\n      }\n    } catch (error) {\n      setMessage(`Error: ${error.message}`);\n    }\n  };\n  const handleCreateTestUser = async () => {\n    try {\n      setMessage('Creando usuario de prueba...');\n      const userData = {\n        name: 'Admin',\n        lastName: 'Test',\n        email: 'admin@test.com',\n        password: 'admin123'\n      };\n      const response = await fetch('http://localhost:8087/api/auth/register', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(userData)\n      });\n      const data = await response.json();\n      if (response.ok) {\n        setMessage('Usuario creado exitosamente. Ahora puedes hacer login.');\n      } else {\n        setMessage(`Error: ${data.message || 'Error al crear usuario'}`);\n      }\n    } catch (error) {\n      setMessage(`Error: ${error.message}`);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      padding: '20px',\n      backgroundColor: '#f5f5f5',\n      margin: '20px',\n      borderRadius: '8px'\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      children: \"Prueba de Autenticaci\\xF3n\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginBottom: '20px'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n        children: \"Usuario Actual:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"Email:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 12\n        }, this), \" \", (user === null || user === void 0 ? void 0 : user.email) || 'No autenticado']\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"Rol ID:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 12\n        }, this), \" \", (user === null || user === void 0 ? void 0 : user.roleId) || 'No disponible']\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"Es Admin:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 12\n        }, this), \" \", isAdmin ? 'Sí' : 'No']\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"Token:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 12\n        }, this), \" \", localStorage.getItem('token') ? 'Presente' : 'Ausente']\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginBottom: '20px'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n        children: \"Login con tu Usuario Admin:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginBottom: '10px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"email\",\n          placeholder: \"Email\",\n          value: testEmail,\n          onChange: e => setTestEmail(e.target.value),\n          style: {\n            marginRight: '10px',\n            padding: '5px'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"password\",\n          placeholder: \"Password\",\n          value: testPassword,\n          onChange: e => setTestPassword(e.target.value),\n          style: {\n            marginRight: '10px',\n            padding: '5px'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleTestLogin,\n          children: \"Login\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 7\n    }, this), message && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        padding: '10px',\n        backgroundColor: message.includes('Error') ? '#ffebee' : '#e8f5e8',\n        borderRadius: '4px',\n        marginTop: '10px'\n      },\n      children: message\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 55,\n    columnNumber: 5\n  }, this);\n};\n_s(AuthTest, \"DL9ZDSyefGvgydT6ijZg4KQRGWA=\", false, function () {\n  return [useAuth];\n});\n_c = AuthTest;\nexport default AuthTest;\nvar _c;\n$RefreshReg$(_c, \"AuthTest\");","map":{"version":3,"names":["React","useState","useAuth","apiService","jsxDEV","_jsxDEV","AuthTest","_s","user","login","isAdmin","testEmail","setTestEmail","testPassword","setTestPassword","message","setMessage","handleTestLogin","result","success","error","handleCreateTestUser","userData","name","lastName","email","password","response","fetch","method","headers","body","JSON","stringify","data","json","ok","style","padding","backgroundColor","margin","borderRadius","children","fileName","_jsxFileName","lineNumber","columnNumber","marginBottom","roleId","localStorage","getItem","type","placeholder","value","onChange","e","target","marginRight","onClick","includes","marginTop","_c","$RefreshReg$"],"sources":["C:/Users/jpval/OneDrive/Desktop/jp/aplicaciones web/app_libreria_1/Frontend/src/components/common/AuthTest.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { useAuth } from '../../context/AuthContext';\r\nimport apiService from '../../services/apiService';\r\n\r\nconst AuthTest = () => {\r\n  const { user, login, isAdmin } = useAuth();\r\n  const [testEmail, setTestEmail] = useState('');\r\n  const [testPassword, setTestPassword] = useState('');\r\n  const [message, setMessage] = useState('');\r\n\r\n  const handleTestLogin = async () => {\r\n    try {\r\n      setMessage('Probando login...');\r\n      const result = await login(testEmail, testPassword);\r\n      if (result.success) {\r\n        setMessage('Login exitoso!');\r\n      } else {\r\n        setMessage(`Error: ${result.error}`);\r\n      }\r\n    } catch (error) {\r\n      setMessage(`Error: ${error.message}`);\r\n    }\r\n  };\r\n\r\n  const handleCreateTestUser = async () => {\r\n    try {\r\n      setMessage('Creando usuario de prueba...');\r\n      const userData = {\r\n        name: 'Admin',\r\n        lastName: 'Test',\r\n        email: 'admin@test.com',\r\n        password: 'admin123'\r\n      };\r\n      \r\n      const response = await fetch('http://localhost:8087/api/auth/register', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify(userData),\r\n      });\r\n      \r\n      const data = await response.json();\r\n      if (response.ok) {\r\n        setMessage('Usuario creado exitosamente. Ahora puedes hacer login.');\r\n      } else {\r\n        setMessage(`Error: ${data.message || 'Error al crear usuario'}`);\r\n      }\r\n    } catch (error) {\r\n      setMessage(`Error: ${error.message}`);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div style={{ padding: '20px', backgroundColor: '#f5f5f5', margin: '20px', borderRadius: '8px' }}>\r\n      <h3>Prueba de Autenticación</h3>\r\n      \r\n      <div style={{ marginBottom: '20px' }}>\r\n        <h4>Usuario Actual:</h4>\r\n        <p><strong>Email:</strong> {user?.email || 'No autenticado'}</p>\r\n        <p><strong>Rol ID:</strong> {user?.roleId || 'No disponible'}</p>\r\n        <p><strong>Es Admin:</strong> {isAdmin ? 'Sí' : 'No'}</p>\r\n        <p><strong>Token:</strong> {localStorage.getItem('token') ? 'Presente' : 'Ausente'}</p>\r\n      </div>\r\n\r\n      <div style={{ marginBottom: '20px' }}>\r\n        <h4>Login con tu Usuario Admin:</h4>\r\n        <div style={{ marginBottom: '10px' }}>\r\n          <input\r\n            type=\"email\"\r\n            placeholder=\"Email\"\r\n            value={testEmail}\r\n            onChange={(e) => setTestEmail(e.target.value)}\r\n            style={{ marginRight: '10px', padding: '5px' }}\r\n          />\r\n          <input\r\n            type=\"password\"\r\n            placeholder=\"Password\"\r\n            value={testPassword}\r\n            onChange={(e) => setTestPassword(e.target.value)}\r\n            style={{ marginRight: '10px', padding: '5px' }}\r\n          />\r\n          <button onClick={handleTestLogin}>\r\n            Login\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {message && (\r\n        <div style={{ \r\n          padding: '10px', \r\n          backgroundColor: message.includes('Error') ? '#ffebee' : '#e8f5e8',\r\n          borderRadius: '4px',\r\n          marginTop: '10px'\r\n        }}>\r\n          {message}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AuthTest; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}